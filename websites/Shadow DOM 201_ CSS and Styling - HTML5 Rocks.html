<!DOCTYPE html>




<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
<head>
  <meta charset="utf-8">
  <meta property="twitter:account_id" content="1593210261" />
  <!-- Copyright (c) 2012 Google Inc.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * Author: Eric Bidelman - e.bidelman@google.com
   *
   * 
   *
  -->
  <title>Shadow DOM 201: CSS and Styling - HTML5 Rocks</title>
  <meta name="description" content="Learn about CSS styling options in Shadow DOM.">
  <meta name="keywords" content="html5,html 5,html5 demos,html5 examples,javascript,css3,notifications,geolocation,web workers,apppcache,file api,filereader,indexeddb,offline,audio,video,drag and drop,chrome,sse,mobile">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta name="theme-color" content="#f04530">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="HTML5 Rocks RSS" href="http://feeds.feedburner.com/html5rocks">
  <meta name="google-site-verification" content="E1HOIDkksrWY5npenL8FeQhKn4Ujctd75iO2lfufSyA" />
  <meta itemprop="name" content="Shadow DOM 201: CSS and Styling - HTML5 Rocks">
  <meta itemprop="description" content="Learn about CSS styling options in Shadow DOM.">
  
<!--<meta itemprop="image" content="images/your_social_sharing_img.png">-->


  
    
  <link rel="canonical" href="https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/">  
    
  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@ChromiumDev">
  <meta name="twitter:creator" content="@ebidel">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Shadow DOM 201: CSS and Styling - HTML5 Rocks">
  <meta property="og:url" content="https://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-201/">
  <meta property="og:description" content="Learn about CSS styling options in Shadow DOM.">
  <meta property="og:image" content="https://www.html5rocks.com/static/images/profiles/ericbidelman.png">
  <meta property="og:site_name" content="HTML5 Rocks - A resource for open web HTML5 developers">
  

  
  <link rel="author" href="https://www.google.com/profiles/118075919496626375791">
  
  
  <link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers">

  
  
  <link rel="alternate" hreflang="zh" href="https://www.html5rocks.com/zh/tutorials/webcomponents/shadowdom-201/">
  
  <link rel="alternate" hreflang="ja" href="https://www.html5rocks.com/ja/tutorials/webcomponents/shadowdom-201/">
  
  <link rel="alternate" hreflang="ko" href="https://www.html5rocks.com/ko/tutorials/webcomponents/shadowdom-201/">
  
  

  
    
    <link rel="stylesheet" media="all" href="/static/css/v2-combined.min.css?20131111">
    

    
  

  <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,800|Source+Code+Pro" rel="stylesheet">

  <link rel="apple-touch-icon" href="/static/images/identity/HTML5_Badge_64.png">
  <link rel="apple-touch-icon-precomposed" href="/static/images/identity/HTML5_Badge_64.png">

  <script src="/static/js/modernizr.custom.82437.js"></script>

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5-els.js"></script>
  <![endif]-->

  
<style>
figure img {
  border: 1px solid #ccc;
}
.tutorial section {
  overflow: visible;
}
.tutorial section iframe {
  width: 100%;
  border: none;
}
article.tutorial .notice.fact {
  position: relative;
  padding-left: 25px;
}
article.tutorial .notice.fact:before {
  position: absolute;
  top: -5px;
  left: -10px;
  text-transform: uppercase;
  -webkit-transform: rotateZ(-30deg);
  -moz-transform: rotateZ(-30deg);
  -o-transform: rotateZ(-30deg);
  -ms-transform: rotateZ(-30deg);
  transform: rotateZ(-30deg);
  /*color: rgb(80, 139, 136);*/
  color: rgb(237, 71, 50);
  font-weight: bold;
  content: "Fact";
}
.tutorial table td,
.tutorial table th {
  border: 1px solid #ccc;
  padding: 5px;
}
.tutorial table th {
  background: #444;
  color: white;
  padding: 10px;
  font-weight: normal;
}
.tutorial table em {
  margin-left: 15px;
}
.tutorial table tr {
  background: #fff;
}
.tutorial table tr:nth-child(odd) {
  background: #eee;
}
.disabledemos .demoarea {
  display: none !important;
}
.demoarea, .demodevtools {
  margin-top: 20px;
}
.demodevtools {
  display: inline-block;
  position: relative;
  vertical-align: top;
  margin-right: 1em;
}
.demodevtools:before {
  content: 'DevTools view:';
  position: absolute;
  top: -20px;
  left: 0;
  font-weight: bold;
  text-transform: uppercase;
}
.demoarea {
  padding: 10px;
  background: #fff;
  border: 1px dashed #000;
  display: inline-block;
  position: relative;
}
.demoarea:before {
  content: 'Live demo:';
  position: absolute;
  top: -30px;
  left: 0;
}
.featuresupported.no {
  display: none !important;
}
.talkinghead:before {
  background-image: url(/static/images/profiles/75/ericbidelman.75.png);
  background-position: 0px 0px !important;
}

#inherit-buttons {
  margin-left: 15px;
  margin-top: 20px;
  display: inline-block;
  vertical-align: top;
}
#inherit-buttons button {
  display: block;
  margin-bottom: 10px;
}
.small-notice {
  font-size: 85%;
}
#style-hat-ex::shadow span {
  color: red;
}
#ex-style-video {
  height: 30px;
  width: 100%;
}
#ex-style-video /deep/ input[type="range"] {
  background: hotpink;
}
</style>

</head>
<body data-href="tutorials-webcomponents-shadowdom-201" onload="" class="article tutorial">

  <header class="main" id="siteheader">
    <h1 id="title">
      <a href="/en/" title="HTML5 Rocks">HTML5 Rocks</a>
    </h1>
    <a href="#sitenav" id="navtoggle">Show navigation</a>

    
    <a id="toctoggle" href="#toc">Table of Contents</a>
    

    <nav id="sitenav">
      <ul>
        
        <li id="home_menu"><a href="/en/" class="home">Home</a></li>
        
        <li id="tutorials_menu"><a href="/en/tutorials/?page=1" class="tutorials">Tutorials</a></li>
        <li id="updates_menu"><a href="https://developers.google.com/web/updates/" class="updates">Updates</a></li>
      </ul>
    </nav>

    
    <nav class="toc" id="toc">
      <h1>Table of Contents</h1>

      <ul><li><a href='#toc-intro'>Introduction</a></li><li><a href='#toc-style-scoped'>Style encapsulation</a></li><li><a href='#toc-style-host'>Styling the host element</a></li><li><a href='#toc-style-cat-hat'>Styling Shadow DOM internals from the outside</a></li><li><a href='#toc-style-hooks'>Creating style hooks</a></li><li><a href='#toc-style-disbtributed-nodes'>Styling distributed nodes</a></li><li><a href='#toc-conclusion'>Conclusion</a></li></ul>

      <h1 class="visible-title">Localizations:</h1>
      <ul>
        
          
          <li><a href="/zh/tutorials/webcomponents/shadowdom-201/">中文 (简体)</a></li>
          
          <li><a href="/ja/tutorials/webcomponents/shadowdom-201/">日本語</a></li>
          
          <li><a href="/ko/tutorials/webcomponents/shadowdom-201/">한국어</a></li>
          
          <li><a href="https://github.com/html5rocks/www.html5rocks.com/blob/master/CONTRIBUTING.md">Contribute another</a></li>
        
      </ul>
    </nav>
    
  </header>

  <div class="body-content">
    

  <section class="title">

    

    <section class="title-text container">
      
      <h1>Shadow DOM 201</h1>
      <h2>CSS and Styling</h2>
      

      <a href="/en/" class="watermark">HTML5 Rocks</a>
    </section>
  </section>

  <article class="content-wrapper">

    <section class="container">

      

      <div class="article-meta" id="article-meta">
        <nav class="toc">
          <h1>Table of Contents</h1>

          <ul><li><a href='#toc-intro'>Introduction</a></li><li><a href='#toc-style-scoped'>Style encapsulation</a></li><li><a href='#toc-style-host'>Styling the host element</a></li><li><a href='#toc-style-cat-hat'>Styling Shadow DOM internals from the outside</a></li><li><a href='#toc-style-hooks'>Creating style hooks</a></li><li><a href='#toc-style-disbtributed-nodes'>Styling distributed nodes</a></li><li><a href='#toc-conclusion'>Conclusion</a></li></ul>
        </nav>

        <aside class="localizations">
          <h1>Localizations</h1>
          <ul>
            
              
              <li><a href="/zh/tutorials/webcomponents/shadowdom-201/">中文 (简体)</a></li>
              
              <li><a href="/ja/tutorials/webcomponents/shadowdom-201/">日本語</a></li>
              
              <li><a href="/ko/tutorials/webcomponents/shadowdom-201/">한국어</a></li>
              
              <li><a href="https://github.com/html5rocks/www.html5rocks.com/blob/master/CONTRIBUTING.md">Contribute another</a></li>
            
          </ul>
        </aside>
      </div>
      

      <div class="content" id="article-content">

        <section class="byline">

          <div class="byline-content">
            
            <section class="author-images">
              <a href="/profiles/#ericbidelman">
                <img src="/static/images/profiles/ericbidelman.png" itemprop="photo" alt="Eric Bidelman" title="Eric Bidelman">
              </a>

              
            </section>

            <section class="meta">
              <div class="authors">
                <strong>By</strong> <a href="/profiles/#ericbidelman">Eric Bidelman</a>
                
              </div>

              

              <div class="date">
                <time pubdate><strong>Published:</strong> March 15th, 2013</time>
                
                <time class="updated"><strong>Updated:</strong> October 3rd, 2016</time>
                <span><strong>Comments:</strong> <a href="#disqus_thread" class="load-comments" data-disqus-identifier="https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/">0</a></span>
              </div>

              <div id="notcompatible" class="hidden">
                Your browser may not support the functionality in this article.
              </div>
            </section>
            <div class="clear"></div>

            
          </div>
        </section>

        

<p class="notice warning" style="text-align:center">
This article describes an old version of Shadow DOM (v0). If you're interested in using Shadow DOM, check out our new article at developers.google.com, "<a href="https://developers.google.com/web/fundamentals/primers/shadowdom/">Shadow DOM v1: self-contained web components</a>". It covers everything in the newer Shadow DOM v1 spec shipping in Chrome 53, Opera, and Safari 10.</p>

<p>This article discusses more of the amazing things you can do with Shadow DOM.
It builds on the concepts discussed in <a href="/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>.
If you're looking for an introduction, see that article.</p>
<h2 id="toc-intro">Introduction</h2>

<p>Let's face it. There's nothing sexy about unstyled markup. Lucky for us, <a href="http://w3c.github.io/webcomponents/explainer/#acknowledgements">the brilliant folks behind Web Components</a>
foresaw this and didn't leave us hanging. The <a href="http://dev.w3.org/csswg/css-scoping/">CSS Scoping Module</a> defines many options for styling content in a shadow tree.</p>
<p class="tip notice">In Chrome, turn on the "Enable experimental Web Platform features" in about:flags to experiment with everything covered in this article.</p>

<h2 id="toc-style-scoped">Style encapsulation</h2>

<p>One of the core features of Shadow DOM is the <a href="http://w3c.github.io/webcomponents/spec/shadow/#shadow-trees">shadow boundary</a>. It has a lot of nice properties,
but one of the best is that it provides style encapsulation for free. Stated another way:</p>
<p class="notice fact">CSS styles defined inside Shadow DOM are scoped to the ShadowRoot. This means styles are encapsulated by default.</p>

<p>Below is an example. If all goes well and your browser supports Shadow DOM (it does<span class="featuresupported no">n't</span>!), you'll see "<span style="color:red">Shadow DOM</span>".</p>
<pre class="prettyprint"><code>&lt;div&gt;&lt;h3&gt;Light DOM&lt;/h3&gt;&lt;/div&gt;
&lt;script&gt;
var root = document.querySelector('div').createShadowRoot();
root.innerHTML = '&lt;style&gt;h3{ color: red; }&lt;/style&gt;' +
                 '&lt;h3&gt;Shadow DOM&lt;/h3&gt;';
&lt;/script&gt;
</code></pre>
<div class="demoarea">
  <div id="style-ex-scoped"><h3>Light DOM</h3></div>
</div>

<script>
(function() {
var container = document.querySelector('#style-ex-scoped');
var root = container.createShadowRoot();
root.innerHTML = '<style>h3{color: red;}</style><h3>Shadow DOM</h3>';
})();
</script>

<p>There are two interesting observations about this demo:</p>
<ul>
<li>There are
<a href="javascript:alert('There are ' + document.querySelectorAll('h3').length + ' &#60;h3&#62; on this page.')">other h3s on this page</a>, but the only one that matches the h3 selector, and therefore styled
red, is the one in the ShadowRoot. Again, scoped styles by default.</li>
<li>Other styles rules defined on this page that target h3s don't bleed into my content.
That's because <strong>selectors don't cross the shadow boundary</strong>.</li>
</ul>
<p>Moral of the story? We have style encapsulation from the outside world. Thanks Shadow DOM!</p>
<h2 id="toc-style-host">Styling the host element</h2>

<p>The <code>:host</code> allows you to select and style the element hosting a shadow tree:</p>
<pre class="prettyprint"><code>&lt;button class="red"&gt;My Button&lt;/button&gt;
&lt;script&gt;
var button = document.querySelector('button');
var root = button.createShadowRoot();
root.innerHTML = '&lt;style&gt;' +
    ':host { text-transform: uppercase; }' +
    '&lt;/style&gt;' +
    '&lt;content&gt;&lt;/content&gt;';
&lt;/script&gt;
</code></pre>
<div class="demoarea">
  <button id="style-athost" class="red">My Button</button>
</div>

<script>
(function() {
var container = document.querySelector('#style-athost');
var root = container.createShadowRoot();
root.innerHTML = '<style>' +
                     ':host { text-transform: uppercase; }' +
                      '</style>' +
                      '<content></content>';
})();
</script>

<p>One gotcha is that rules in the parent page have higher specificity than <code>:host</code>
rules defined in the element, but lower specificity than a <code>style</code> attribute
defined on the host element.  This allows users to override your styling from the outside.
<code>:host</code> also only works in the context of a ShadowRoot so you can't use it outside of Shadow DOM.</p>
<p>The functional form of <code>:host(&lt;selector&gt;)</code> allows you to target the host element if it matches a <code>&lt;selector&gt;</code>. </p>
<p><strong>Example</strong> - match only if the element itself has the class <code>.different</code> (e.g.. <code>&lt;x-foo class="different"&gt;&lt;/x-foo&gt;</code>):</p>
<pre class="prettyprint"><code>:host(.different) {
  ...
}
</code></pre>
<h3 id="toc-style-states">Reacting to user states</h3>

<p>A common use case for <code>:host</code> is when you're creating a <a href="/tutorials/webcomponents/customelements/">Custom Element</a> and want to react to different user states (:hover, :focus, :active, etc.).</p>
<pre class="prettyprint"><code>&lt;style&gt;
:host {
  opacity: 0.4;
  transition: opacity 420ms ease-in-out;
}
:host(:hover) {
  opacity: 1;
}
:host(:active) {
  position: relative;
  top: 3px;
  left: 3px;
}
&lt;/style&gt;
</code></pre>
<div class="demoarea">
  <button id="style-athost-ex2">My Button</button>
</div>

<script>
(function() {
var container = document.querySelector('#style-athost-ex2');
var root = container.createShadowRoot();
root.innerHTML = '<style>\
      :host {\
        opacity: 0.4;\
        transition: opacity 200ms ease-in-out;\
      }\
      :host(:active) { position:relative;top:3px;left:3px; }\
      :host(:hover) {\
        opacity: 1;\
      }\
    }</style><content></content>';
})();
</script>

<h3 id="toc-style-themeing">Theming an element</h3>

<p>The <code>:host-context(&lt;selector&gt;)</code> pseudo class matches the host element if it or any of its ancestors matches <code>&lt;selector&gt;</code>.</p>
<p>A common use of <code>:host-context()</code> is for theming an element based on its surrounds. For example,
many people do theming by applying a class to <code>&lt;html&gt;</code> or <code>&lt;body&gt;</code>:</p>
<pre class="prettyprint"><code>&lt;body class="different"&gt;
  &lt;x-foo&gt;&lt;/x-foo&gt;
&lt;/body&gt;
</code></pre>
<p>You can <code>:host-context(.different)</code> to style <code>&lt;x-foo&gt;</code> when it's a descendant of an element with the class <code>.different</code>:</p>
<pre class="prettyprint"><code>:host-context(.different) {
  color: red;
}
</code></pre>
<p>This gives you the ability encapsulate style rules in an element's Shadow DOM that
uniquely style it, based on its context.</p>
<h3 id="toc-style-multi">Support multiple host types from within one shadow root</h3>

<p>Another use for <code>:host</code> is if you're creating a theming library and want to
support styling many types of host elements from within the same Shadow DOM.</p>
<pre class="prettyprint"><code>:host(x-foo) {
  /* Applies if the host is a &lt;x-foo&gt; element.*/
}

:host(x-foo:host) {
  /* Same as above. Applies if the host is a &lt;x-foo&gt; element. */
}

:host(div) {  {
  /* Applies if the host element is a &lt;div&gt;. */
}
</code></pre>
<h2 id="toc-style-cat-hat">Styling Shadow DOM internals from the outside</h2>

<p>The <code>::shadow</code> pseudo-element and <code>/deep/</code> combinator are like having a Vorpal sword of CSS authority.
They allow piercing through Shadow DOM's boundary to style elements within shadow trees.</p>
<h3 id="toc-style-hat">The ::shadow pseudo-element</h3>

<p>If an element has at least one shadow tree, the <code>::shadow</code> pseudo-element matches the shadow root itself.
It allows you to write selectors that style nodes internal to an element's shadow dom.</p>
<p>For example, if an element is hosting a shadow root, you can write <code>#host::shadow span {}</code> to style all of the spans within its shadow tree.</p>
<pre class="prettyprint"><code>&lt;style&gt;
  #host::shadow span {
    color: red;
  }
&lt;/style&gt;

&lt;div id="host"&gt;
  &lt;span&gt;Light DOM&lt;/span&gt;
&lt;/div&gt;

&lt;script&gt;
  var host = document.querySelector('div');
  var root = host.createShadowRoot();
  root.innerHTML = "&lt;span&gt;Shadow DOM&lt;/span&gt;" +
                   "&lt;content&gt;&lt;/content&gt;";
&lt;/script&gt;
</code></pre>
<div class="demoarea">
  <div id="style-hat-ex">
    <span>Light DOM</span>
  </div>
</div>

<script>
(function() {
var host = document.querySelector('#style-hat-ex');
var root = host.createShadowRoot();
root.innerHTML = '<span>Shadow DOM</span>' +
                 '<content></content>';
})();
</script>

<p><strong>Example</strong> (custom elements) -  <code>&lt;x-tabs&gt;</code>  has <code>&lt;x-panel&gt;</code> children in its Shadow DOM. Each panel hosts its own shadow tree containing <code>h2</code> headings. To style those headings from the main page, one could write:</p>
<pre class="prettyprint"><code>x-tabs::shadow x-panel::shadow h2 {
  ...
}
</code></pre>
<h3 id="toc-style-cat">The /deep/ combinator</h3>

<p>The <code>/deep/</code> combinator is similar to <code>::shadow</code>, but more powerful. It completely ignores all shadow boundaries and crosses into any number of shadow trees. Put simply, <code>/deep/</code> allows you to drill into an element's guts and target any node.</p>
<p>The <code>/deep/</code> combinator is particularly useful in the world of Custom Elements where it's common to have multiple levels of Shadow DOM. Prime examples are nesting a bunch of custom elements (each hosting their own shadow tree) or creating an element that inherits from another using <a href="/tutorials/webcomponents/shadowdom-301/#toc-shadow-insertion"><code>&lt;shadow&gt;</code></a>.</p>
<p><strong>Example</strong> (custom elements) -  select all <code>&lt;x-panel&gt;</code> elements that are descendants of
<code>&lt;x-tabs&gt;</code>, anywhere in the tree:</p>
<pre class="prettyprint"><code>x-tabs /deep/ x-panel {
  ...
}
</code></pre>
<p><strong>Example</strong> - style all elements with the class <code>.library-theme</code>, anywhere in a shadow tree:</p>
<pre class="prettyprint"><code>body /deep/ .library-theme {
  ...
}
</code></pre>
<h3 id="toc-css-traverasl">Working with querySelector()</h3>

<p>Just like <a href="/tutorials/webcomponents/shadowdom-301/#toc-get-shadowroot"><code>.shadowRoot</code></a> opens
shadow trees up for DOM traversal, the combinators open shadow trees for selector traversal.
Instead of writing a nested chain of madness, you can write a single statement:</p>
<pre class="prettyprint"><code>// No fun.
document.querySelector('x-tabs').shadowRoot
        .querySelector('x-panel').shadowRoot
        .querySelector('#foo');

// Fun.
document.querySelector('x-tabs::shadow x-panel::shadow #foo');
</code></pre>
<h3 id="toc-style-native">Styling native elements</h3>

<p>Native HTML controls are a challenge to style. Many people simply give up
and roll their own. However, with <code>::shadow</code> and <code>/deep/</code>, any element in the web platform that
uses Shadow DOM can be styled. Great examples are the <code>&lt;input&gt;</code> types and <code>&lt;video&gt;</code>:</p>
<pre class="prettyprint"><code>video /deep/ input[type="range"] {
  background: hotpink;
}
</code></pre>
<div class="demoarea">
  <video id="ex-style-video" controls></video>
</div>

<blockquote class="commentary talkinghead">
Do the <code>::shadow</code> pseudo-element and <code>/deep/</code> combinator defeat the purpose of style encapsulation? Out of the box, Shadow DOM prevents <em>accidental</em> styling from outsiders but it never promises to be a bullet proof vest. Developers should be allowed to <em>intentionally</em> style inner parts of your Shadow tree...if they know what they're doing. Having more control is also good for flexibility, theming, and the re-usability of your elements.
</blockquote>

<h2 id="toc-style-hooks">Creating style hooks</h2>

<p>Customization is good. In certain cases, you may want to poke holes in your Shadow's
styling shield and create hooks for others to style.</p>
<h3 id="toc-custom-pseduo">Using ::shadow and /deep/</h3>

<p>There's a lot of power behind <code>/deep/</code>. It gives component authors a way to designate
individual elements as styleable or a slew of elements as themeable.</p>
<p><strong>Example</strong> - style all elements that have the class <code>.library-theme</code>, ignoring all shadow trees:</p>
<pre class="prettyprint"><code>body /deep/ .library-theme {
  ...
}
</code></pre>
<p></p>
<h3 id="toc-vars">Using CSS Variables</h3>

<p>A powerful way to create theming hooks will be through <a href="http://dev.w3.org/csswg/css-variables/">CSS Variables</a>. Essentially, creating "style placeholders" for other users to fill in.</p>
<p>Imagine a custom element author who marks out variable placeholders in their Shadow DOM. One for styling an internal button's font and another for its color:</p>
<pre class="prettyprint"><code>button {
  color: var(--button-text-color, pink); /* default color will be pink */
  font-family: var(--button-font);
}
</code></pre>
<p>Then, the embedder of the element defines those values to their liking. Perhaps
to match the super cool Comic Sans theme of their own page:</p>
<pre class="prettyprint"><code>#host {
  --button-text-color: green;
  --button-font: "Comic Sans MS", "Comic Sans", cursive;
}
</code></pre>
<p>Due to the way CSS Variables inherit, everything is peachy and this
works beautifully! The whole picture looks like this:</p>
<pre class="prettyprint"><code>&lt;style&gt;
  #host {
    --button-text-color: green;
    --button-font: "Comic Sans MS", "Comic Sans", cursive;
  }
&lt;/style&gt;
&lt;div id="host"&gt;Host node&lt;/div&gt;
&lt;script&gt;
var root = document.querySelector('#host').createShadowRoot();
root.innerHTML = '&lt;style&gt;' +
    'button {' +
      'color: var(--button-text-color, pink);' +
      'font-family: var(--button-font);' +
    '}' +
    '&lt;/style&gt;' +
    '&lt;content&gt;&lt;/content&gt;';
&lt;/script&gt;
</code></pre>
<blockquote class="commentary talkinghead">
I've already mentioned <a href="/tutorials/webcomponents/customelements/">Custom Elements</a> a few times in this article. For now, just know that Shadow DOM forms their structural foundation
by providing styling and DOM encapsulation. The concepts here pertain to styling Custom Elements.
</blockquote>

<p></p>
<h2 id="toc-style-disbtributed-nodes">Styling distributed nodes</h2>

<p>Distributed nodes are elements that render at an <a href="/tutorials/webcomponents/shadowdom-301/#toc-distributed-nodes">insertion point</a> (a <code>&lt;content&gt;</code> element). The <code>&lt;content&gt;</code> element allows you to select nodes from the Light DOM and render them at predefined locations in your Shadow DOM. They're not logically in the Shadow DOM; they're still children of the host element. Insertion points are just a rendering thing.</p>
<p>Distributed nodes retain styles from the main document. That is, style rules
from the main page continue to apply to the elements, even when they render at an insertion point.
Again, distributed nodes are still logically in the light dom and don't move. They just render
elsewhere. However, when the nodes get distributed into the Shadow DOM, they can take on additional styles
defined inside the shadow tree.</p>
<h3 id="toc-distributed">::content pseudo element</h3>

<p>Distributed nodes are children of the host element, so how can we target
them from <em>within</em> the Shadow DOM? The answer is the CSS <code>::content</code> pseudo element.
It's a way to target Light DOM nodes that pass through an insertion point. For example:</p>
<p><code>::content &gt; h3</code> styles any <code>h3</code> tags that pass through an insertion point.</p>
<p>Let's see an example:</p>
<pre class="prettyprint"><code>&lt;div&gt;
  &lt;h3&gt;Light DOM&lt;/h3&gt;
  &lt;section&gt;
    &lt;div&gt;I'm not underlined&lt;/div&gt;
    &lt;p&gt;I'm underlined in Shadow DOM!&lt;/p&gt;
  &lt;/section&gt;
&lt;/div&gt;

&lt;script&gt;
var div = document.querySelector('div');
var root = div.createShadowRoot();
root.innerHTML = '\
    &lt;style&gt;\
      h3 { color: red; }\
      content[select="h3"]::content &gt; h3 {\
        color: green;\
      }\
      ::content section p {\
        text-decoration: underline;\
      }\
    &lt;/style&gt;\
    &lt;h3&gt;Shadow DOM&lt;/h3&gt;\
    &lt;content select="h3"&gt;&lt;/content&gt;\
    &lt;content select="section"&gt;&lt;/content&gt;';
&lt;/script&gt;
</code></pre>
<div class="demoarea">
  <div id="style-ex-distributed">
    <h3>Light DOM</h3>
    <section>
      <div>I'm not underlined</div>
      <p>I'm underlined in Shadow DOM!</p>
      </section>
  </div>
</div>

<script>
(function() {
var container = document.querySelector('#style-ex-distributed');
var root = container.createShadowRoot();
root.innerHTML = '\
  <style>\
    h3 { color: red; }\
    content[select="h3"]::content > h3 {\
      color: green;\
    }\
    ::content section p {\
      text-decoration: underline;\
    }\
  </style>\
  <h3>Shadow DOM</h3>\
  <content select="h3"></content>\
  <content select="section"></content>';
})();
</script>

<p>You should see "<span style="color:red">Shadow DOM</span>" and
"<span style="color:green">Light DOM</span>" below it. Also note that
"Light DOM" is still retaining the styles (margins etc.) defined on this page.
That's because the page's styles still match!</p>
<p></p>
</li>
</ul>
<blockquote class="commentary talkinghead">
Remember: styles defined in the host document continue to apply to nodes they target,
even when those nodes get distributed "inside" the Shadow DOM. Going into an
insertion point doesn't change what's applied.
</blockquote>

<h2 id="toc-conclusion">Conclusion</h2>

<p>As authors of custom elements, we have a ton of options for controlling
the look and feel of our content. Shadow DOM forms the basis for this brave new world.</p>
<p>Shadow DOM gives us scoped style encapsulation and a means to let in as much (or as little)
of the outside world as we choose. By defining custom pseudo elements or including
CSS Variable placeholders, authors can provide third-parties convenient styling hooks
to further customize their content. All in all, web authors are in full control
of how their content is represented.</p>
<p class="small-notice">
Thanks to <a href="/profiles/#dominiccooney">Dominic Cooney</a> and
<a href="https://plus.google.com/111648463906387632236/posts">Dimitri Glazkov</a> for reviewing
the content of this tutorial.
</p>

<p>
<aside class="panel">
  <h2>Related reading</h2>
  <ul>
    <li><a href="/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a></li>
    <li><a href="/tutorials/webcomponents/shadowdom-301/">Shadow DOM 301 - Advanced Concepts &amp; DOM APIs</a></li>
    <li><a href="/tutorials/webcomponents/customelements/">Custom Elements - defining new elements in HTML</a></li>
  </ul>
</aside>
</p><script>
document.addEventListener('DOMContentLoaded', function(e) {
  if (!isCompatible()) {
    document.body.classList.add('disabledemos');
    $('.featuresupported').removeClass('no');
  }
});
</script>

      </div>
    </section>
  </article>

  
  <section class="disqus pattern-bg-lighter">

    <div id="disqus" class="container">

      <h2>Comments</h2>

      <div id="disqus_thread">

        <a href="#disqus_thread" class="load-comments" data-disqus-identifier="https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/">0</a>

      </div>
    </div>

    <noscript>
      <p class="center">
        <strong>
          <a href="https://disqus.com/?ref_noscript">Please enable JavaScript to view the comments powered by Disqus.</a>
        </strong>
      </p>
    </noscript>

    <script>

      var disqus_shortname = 'html5rocks';
      var disqus_identifier = 'https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/';
      var disqus_url = 'https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/';
      var disqus_developer = 0;

      var disqus_config = function () {
        var funky_language_code_mapping = {
          'de': 'de_inf',
          'es': 'es_ES',
          'pt': 'pt_EU',
          'sr': 'sr_CYRL',
          'sv': 'sv_SE',
          'zh': 'zh_HANT'
        };
        this.language = funky_language_code_mapping['en'] ||
                        'en';

        this.callbacks.onReady = [ function () {
                                      try {
                                        ga('send', 'event', 'View comments');
                                      } catch(err){}
                                   } ];
        this.callbacks.onNewComment = [ function (comment) {
                                          try {
                                            ga('send', 'event', 'Commented');
                                          } catch(err){}
                                        } ];
      };

      window.addEventListener('load', function(e) {

        var c = document.createElement('script');
        c.type = 'text/javascript';
        c.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        c.async = true;

        var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
        sp.insertBefore(c, s);

        if (window.location.hash === '#disqus_thread')
          loadComments();

      }, false);

      var disqus_loaded = false;
      function loadComments() {

        if (disqus_loaded)
          return;

        disqus_loaded = true;

        ga('send', 'event', 'Interactions', 'Comments', 'Comments Loaded');

        var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;

        var disqusContainer = document.getElementById('disqus');
        disqusContainer.classList.add('active');

        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        sp.insertBefore(dsq, s);
      }

      function outgoing(url) {
        try {
          ga('send', 'event', 'Outbound Links' , url);
        } catch(err){}
      }
      // Open external links (also that don't have a target defined) in a new tab.
      var externLinks = document.querySelectorAll('article.tutorial a[href^="http"]:not([target])');
      for(var i = 0, a; a = externLinks[i]; ++i) {
        a.target = '_blank';
        a.addEventListener('click', new Function('outgoing(' + '"' + a.href.replace(/.*?:\/\//g, "") + '"' + ');'));
      }

      var loadCommentsButtons = document.querySelectorAll('.load-comments');
      for(var l = 0; l < loadCommentsButtons.length; l++)
        loadCommentsButtons[l].addEventListener('click', loadComments);

    </script>
  </section>
  

  <footer>
    <div class="container">

      
        <h1>Next steps</h2>

        
<aside class="panel">
  <h2>Related reading</h2>
  <ul>
    <li><a href="/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a></li>
    <li><a href="/tutorials/webcomponents/shadowdom-301/">Shadow DOM 301 - Advanced Concepts &amp; DOM APIs</a></li>
    <li><a href="/tutorials/webcomponents/customelements/">Custom Elements - defining new elements in HTML</a></li>
  </ul>
</aside>


        <aside class="panel share">
          <h2>Share</h2>
          <style>
            aside.share.native .android { display: inline-block !important;
            background-image: url(https://storage.googleapis.com/material-icons/external-assets/v4/icons/svg/ic_share_white_36px.svg) !important;
            background-size: 48px 48px !important;
             background-position: 0, 0 !important; }
          </style>
          <a href="https://twitter.com/share?url=https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/&text=Shadow DOM 201&lang=en&via=ChromiumDev&related=ChromiumDev" class="android" style="display: none;">Share</a>
          <a href="https://twitter.com/share?url=https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/&text=Shadow DOM 201&lang=en&via=ChromiumDev&related=ChromiumDev" class="twitter" target="_blank">Twitter</a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/" class="facebook" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/" class="gplus" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">Google+</a>
        </aside>

        <aside class="panel rss">
          <h2>Subscribe</h2>
          <p>Enjoyed this article? Grab the <a href="http://feeds.feedburner.com/html5rocks">RSS feed</a> and stay up-to-date.</p>
        </aside>

      

      <p class="licensing">
      
        Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
      
      </p>

    </div>
  </footer>

  <script>
    window.isCompatible = function() {
      
  return !!HTMLElement.prototype.createShadowRoot;

    };
    
    if(navigator.share !== undefined) {
    document.addEventListener('DOMContentLoaded', e => {
      var shareBox = document.querySelector('aside.share');
      if(shareBox !== undefined) { shareBox.classList.toggle('native'); }
      
      var shareBtn = document.querySelector('aside.share a.android');
      shareBtn.addEventListener('click', clickEvent => {
        clickEvent.preventDefault();
        const title = "Shadow DOM 201";
        const url = "https://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/";
        navigator.share({title: title, text: url, url: url})
          .then(() => console.log('Successful share'),
           error => console.log('Error sharing:', error));
      });
    });
}

    if (isCompatible() === false) {
      document.getElementById('notcompatible').className = '';
    }

    function _prettyPrint() {
      if (typeof customPrettyPrintLanguage != 'undefined') {
        customPrettyPrintLanguage();
      }
      prettyPrint();
    }
  </script>
  <script async src="/static/js/prettify.min.js" onload="_prettyPrint()"></script>
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-XXXX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MB3LRF');</script>
<!-- End Google Tag Manager -->


  </div>

  <script>
  (function() {

    // Kill feedburner and marketing tracking arguments, but let them register
    // before we do it.
    setTimeout(function() {
      if (/^\?utm_/.test(document.location.search) &&
          window.history.replaceState) {
        window.history.replaceState(
            {}, '', document.location.href.replace(/\?utm_.*/, ''));
      }
    }, 2000);

    var siteHeader = document.getElementById('siteheader');
    var navToggle = document.getElementById('navtoggle');
    var siteNav = document.getElementById('sitenav');

    function toggle(target, forceActive) {

      if (typeof toc !== 'undefined') {
        // Switch off whichever one is not the
        // current target
        if (target === toc)
          siteNav.classList.remove('active');
        else
          toc.classList.remove('active');
      }

      // Toggle if no force parameter is set
      if (typeof forceActive === 'undefined') {
        target.classList.toggle('active');
      } else {
        if (forceActive)
          target.classList.add('active');
        else
          target.classList.remove('active');
      }

      // now find out what the set state ended up being
      var isActive = target.classList.contains('active');

      if (isActive)
        siteHeader.classList.add('expanded');
      else
        siteHeader.classList.remove('expanded');

    }

    navToggle.addEventListener('click', function(e) {
      toggle(siteNav);
      e.preventDefault();
    });

    

    var tocToggle = document.getElementById('toctoggle');
    var toc = document.getElementById('toc');
    var articleMeta = document.getElementById('article-meta');
    var articleContent = document.getElementById('article-content');
    var articleMetaHeight = 0;
    var articleMetaMaxY = 0;
    var articleMetaMinY = 0;
    var articleContentPadding = 200;

    var tocLinks = document.querySelectorAll('.toc a');
    for (var t = 0; t < tocLinks.length; t++)
      tocLinks[t].addEventListener('click', onTocLinkClick);

    tocToggle.addEventListener('click', function(e) {
      toggle(toc);
      e.preventDefault();
    });

    toc.addEventListener('click', function(e) {
      if (e.target !== siteNav)
        toggle(toc, false);
    });

    function onTocLinkClick() {
      ga('send', 'event', 'Interactions', 'TOC', 'TOC Clicked');
    }

    function setMinScrollYFromMetaY() {
      var scrollPosition = window.scrollY;

      var articleMetaBounds = articleMeta.getBoundingClientRect();
      var articleMetaTop = Math.max(352,
          articleMetaBounds.top - 20 + scrollPosition);

      articleMetaHeight = articleMetaBounds.bottom - articleMetaBounds.top;
      articleMetaMinY = articleMetaTop;
    }

    function setMaxScrollYFromContentHeight() {

      var scrollPosition = window.scrollY;

      var articleContentBounds = articleContent.getBoundingClientRect();
      var articleContentTop = articleContentBounds.top + scrollPosition;
      var articleContentHeight = articleContentBounds.bottom - articleContentBounds.top;

      articleMetaMaxY = articleContentTop +
          articleContentHeight -
          articleMetaHeight -
          articleContentPadding;

    }

    function onScroll(e) {

      if (window.scrollY >= articleMetaMinY) {

        articleMeta.classList.add('sticky');

        var articleMetaTop = 22 - Math.max(0, window.scrollY - articleMetaMaxY);
        articleMeta.style.top = articleMetaTop + 'px';

      } else {
        articleMeta.classList.remove('sticky');
        articleMeta.style.top = 'auto';
      }
    }

    if (articleMeta.getBoundingClientRect) {
      setMinScrollYFromMetaY();
      setMaxScrollYFromContentHeight();
      document.addEventListener('scroll', onScroll);
      window.addEventListener('load', setMaxScrollYFromContentHeight, false);
    }

    
  })();
  </script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15028909-1', 'auto');
  ga('create', 'UA-49880327-4', 'auto', {'name': 'html5rocks'});

  ga('send', 'pageview');
  ga('html5rocks.send', 'pageview');

  </script>
   <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-XXXX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MB3LRF');</script>
<!-- End Google Tag Manager -->
</body>
</html>
